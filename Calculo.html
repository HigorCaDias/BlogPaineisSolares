<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Projeto Integrador III</title>
        <!-- Favicon-->
        <link rel="icon" href="https://unisal.br/wp-content/uploads/2021/10/cropped-512-32x32.jpg" sizes="32x32">
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="index.html">SolarSon</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ms-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                        <li class="nav-item"><a class="nav-link" href="index.html">Página Inicial</a></li>
                        <li class="nav-item"><a class="nav-link" href="calculoEletrodomestico.html">Cálculo Eletrodoméstico</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">  
            <div class="masthead-heading text-uppercase"> Faça seu Orçamento !</div> 
        </header>
        <br>
        <div class="container">
            <div class="row espacador">
                <div class="col-12 col-md-12">
                    <h3 class="navbar-brand"><u>Cálculo Painel</u></h3>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-8">   
                    <div class="row espacador">
                        
                </div>
                <div>
                    <label>KW/h - Mensal</label>
                    <input type="number" id="txtGastoMensal" class="form-control seletor" value="" maxlength="7" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');">
                </div>
                <div>
                    <label>Preço kw/h</label>
                    <input type="text" id="txtKwh" class="form-control seletor" value="0." maxlength="7" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');">
                </div>
                <div>
                    <label>Quantidade de placas utilizadas</label>
                    <input type="number" id="txtQtdPlacas" class="form-control seletor" value="" maxlength="2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');">
                </div>
                <div>
                    <label>Painel</label>
                    <select type="number" id="txtPainel" class="form-control seletor" value="0"> 
                        <option value="" disabled selected>Selecione...</option>
                        <option value="avancado">RESUN SOLAR - 280 WATTS</option>
                        <option value="basico">JINKO - 460 WATTS</option>
                        <option value="intermediario">SUNOVA - 550 WATTS</option>
                    </select>
                </div>
                <button class="btn btn-warning" style="float: right; margin-top: 5px;" onclick="calcularConsumo()">Calcular</button>
                <br>
                <br>
                <table class="table talbe-striped" style="align-content: center">
                    <thead>
                        <tr>
                            <th>Descrição</th>
                            <th>Valor</th>
                        </tr>
                    </thead> 
                    <tbody>
                        <tr>
                            <td>Área mínima necessária para instalação dos painéis</td>
                            <td><span id="areaMinima"> 0 m²</span></td>
                        </tr>
                        <tr>
                            <td>Economia mensal gerada pelos painéis</td>
                            <td><span id="totalEconomia"> 0 KW/h</span></td>
                        </tr>
                        <tr>
                            <td>Valor a pagar sem placa </td>
                            <td><span id="valorTotal">R$ 0,0</span></td>
                        </tr>
                        <tr>
                            <td id="valorPagar">Valor a pagar com placa</td>
                            <td><span id="valorEconomia">R$ 0,0</span></td>
                        </tr>
                        <tr>
                            <td>Tempo de retorno do investimento</td>
                            <td><span id="payBack">R$ 0,0 </span></td>
                        </tr>
                        <tr>
                            <td>Capacidade de armazenamento do inversor sugerido</td>
                            <td><span id="inversor">0,0 kWp</span></td>
                        </tr>
                        <tr>
                            <td>Custo do projeto (Painel + inversor + mão de obra)</td>
                            <td><span id="custoPainel">R$ 0,0 </span></td>
                        </tr>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div> 
        <!-- Rodapé-->
        <footer class="footer py-4"  style="background-color:rgb(226, 225, 225)">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-start"><b> Venha fazer parte da nossa instituição!</b></div>
                    <div class="col-lg-4 my-3 my-lg-0">
                        <a class="btn btn-dark btn-social mx-2" href="https://twitter.com/unisal?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="https://www.facebook.com/unisalamericana/" aria-label="Facebook" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    </div>
                    <div class="col-lg-4 text-lg-end">
                    </div>
                </div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    
    </body>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
        <script>


                    function calcularConsumo(){
                    var gastoMes = parseInt($("#txtGastoMensal").val());
                    var valor = parseFloat($("#txtKwh").val());
                    var qtdPlacas = parseInt($("#txtQtdPlacas").val());
                    var tipoPainel = $("#txtPainel").val();

                    var painelBasico = (((460 / 1000) * qtdPlacas)*12)*30    ;
                    var painelIntermediario =(( (550 / 1000) * qtdPlacas)*12)*30;
                    var painelAvancado = (((280 / 1000) * qtdPlacas)*12)*30;
                
                    var painelBasicoArea = (1.903 * 1.134) * qtdPlacas;
                    var painelIntermediarioArea = (2.279 * 1.134 ) * qtdPlacas;
                    var painelAvancadoArea = (1.640 * 0.992 )* qtdPlacas;

                    var valorPainelBasico = 1835.90 * qtdPlacas;
                    var valorPainelIntermediario = 1364.8 * qtdPlacas;
                    var valorPainelAvancado = 594.27 * qtdPlacas;

                    //Calculo Inversor Utilizado 
                
                    
                    
                    //Calculo valor da fatura sem palca
                    var fatura = gastoMes * valor;
                    $("#valorTotal").html("R$ " + fatura.toFixed(2));
                    
                    // Calculo Economia mensal de KW/h
                    if(tipoPainel == "basico"){
                        var economiaMensal = gastoMes - painelBasico;
                        $("#totalEconomia").html(painelBasico.toFixed(2) + " KW/h" );
                        //Calculo valor da fatura com a placa
                        var faturaComPlaca = fatura - (painelBasico * valor);
                        $("#valorEconomia").html("R$ " + faturaComPlaca.toFixed(2));
                        //Área minima instalação das placas
                        $("#areaMinima").html(painelBasicoArea.toFixed(2) + " m²");
                        //Custo de cada placa multiplicada por quantia de placas
                        $("#custoPainel").html(" R$" + valorPainelBasico.toFixed(2) );
                        //Calculo para PayBack do painel
                        console.log(payBack);
                        if(painelBasico <= 12.5 * 30){
                            var orcamentoFinal = valorPainelBasico + 12500 + 1250;
                          
                            $('#inversor').html("12.5 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        
                        }else if(painelBasico <= 16 * 30 ){
                            var orcamentoFinal = valorPainelBasico + 14000;
                            $('#inversor').html("15.0 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        }else{
                            var orcamentoFinal = valorPainelBasico + 16000;
                            $('#inversor').html("25.0 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        }
                    }
                    
                    if(tipoPainel == "intermediario"){
                        var economiaMensal = gastoMes - painelIntermediario;
                        $("#totalEconomia").html(painelIntermediario.toFixed(2) + " KW/h" );
                        var faturaComPlaca = fatura - (painelIntermediario * valor);
                        $("#valorEconomia").html("R$ " + faturaComPlaca.toFixed(2));
                        $("#areaMinima").html(painelIntermediarioArea.toFixed(2) + " m²");
                        $("#custoPainel").html(" R$" + valorPainelIntermediario.toFixed(2));
                        var payBack = valorPainelIntermediario/faturaComPlaca;
                        $("#payBack").html(payBack.toFixed(1) + " Meses");
                        if(painelIntermediario <= 12.5 * 30){
                            var orcamentoFinal = valorPainelIntermediario + 12500 + 1250;
                            $('#inversor').html("12.5 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        
                        }else if(painelIntermediario <= 15 * 30 ){
                            var orcamentoFinal = valorPainelIntermediario + 14000;
                            $('#inversor').html("15.0 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        }else{
                            var orcamentoFinal = valorPainelIntermediario + 16000;
                            $('#inversor').html("25.0 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        }
                    }
                    
                    if(tipoPainel == "avancado"){
                        var economiaMensal = gastoMes - painelAvancado;
                        $("#totalEconomia").html(painelAvancado.toFixed(2) + " KW/h" );
                        var faturaComPlaca = fatura - (painelAvancado * valor);
                        $("#valorEconomia").html("R$ " + faturaComPlaca.toFixed(2));
                        $("#areaMinima").html(painelAvancadoArea.toFixed(2) + " m²");
                        $("#custoPainel").html("R$ " + valorPainelAvancado.toFixed(2));
                        if(painelAvancado <= 12.5 * 30){
                            var orcamentoFinal = valorPainelAvancado + 12500 + 1250;
                            $('#inversor').html("12.5 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        
                        }else if(painelAvancado <= 15 * 30){
                            var orcamentoFinal = valorPainelAvancado + 14000;
                            $('#inversor').html("15.0 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        }else{
                            var orcamentoFinal = valorPainelAvancado + 16000;
                            $('#inversor').html("25.0 kWp");
                            $("#custoPainel").html("R$ " + orcamentoFinal.toFixed(2));
                            if(faturaComPlaca < 0 ){
                                var payBack = orcamentoFinal/((faturaComPlaca * -1)+fatura);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }else{ 
                                var payBack = orcamentoFinal/(fatura - faturaComPlaca);
                                $("#payBack").html(payBack.toFixed() + " Meses");
                            }
                        }
                    }
            };
        </script>
</html>
